<div class="page-container">
  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="brand text-center">
      <img src="/images/navimag1.png" class="elephant" />
      <div>
        <div class="brand-name">SREE ANNAPURNA</div>
        <div class="tagline">CATERERS & EVENTS</div>
      </div>
      <img src="/images/navimag1.png" class="elephant mirror" />
    </div>
  </nav>

  <!-- HEADER -->
  <div class="menu-header">
    <div class="contact left-contact" *ngIf="proprietors.length">
      <div class="person-name">{{ proprietors[0]?.contact_name }}</div>
      <div class="person-role">{{ proprietors[0]?.designation }}</div>
      <div class="person-phone">{{ proprietors[0]?.contact_number }}</div>
    </div>

    <div class="menu-title">
      <div class="title-text">ELABORATE MENU</div>
      <div class="title-subtext">Make Your Choice...</div>
    </div>

    <div class="contact right-contact" *ngIf="planners.length">
      <div class="person-name">{{ planners[0]?.contact_name }}</div>
      <div class="person-role">{{ planners[0]?.designation }}</div>
      <div class="person-phone">{{ planners[0]?.contact_number }}</div>
    </div>
  </div>

  <!-- ================= MENU CARD ================= -->
  <div class="menu-card card">
    <!-- Card Header -->
    <div class="menu-card-header card-header">Choose Your Menu Items</div>

    <!-- Card Body (Scrollable) -->
    <div class="menu-card-body">
      <div class="categories-container">
        <div *ngFor="let category of groupedItems | keyvalue" class="category-block">
          <div class="category-title">{{ category.key }}</div>

          <label *ngFor="let item of category.value" class="menu-item">
            <input type="checkbox" [(ngModel)]="item.selected" />
            <span>{{ item.name }}</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Card Footer -->
    <div class="menu-card-footer card-footer">
      <button class="send-btn" type="button" (click)="sendOrder()">Send Order</button>
    </div>
  </div>

  <!-- ================= MODAL ================= -->
  <div class="modal-backdrop-custom" *ngIf="isModalOpen" (click)="closeModal()">
    <div class="order-modal" (click)="$event.stopPropagation()">
      <h5 class="modal-title">Selected Menu Items</h5>

      <form #menuForm="ngForm" (ngSubmit)="submitOrder(menuForm)">
        <div *ngFor="let cat of selectedCategories" class="selected-category">
          <h6>{{ cat.name }}</h6>
          <div *ngFor="let item of cat.items">âœ” {{ item.name }}</div>
        </div>

        <hr />

        <input
          type="text"
          placeholder="Customer Name"
          name="customerName"
          [(ngModel)]="customer.name"
          required
          minlength="3"
        />

        <input
          type="tel"
          placeholder="Mobile Number"
          name="mobile"
          [(ngModel)]="customer.mobile"
          pattern="[0-9]{10}"
          maxlength="10"
          required
        />

        <input
          type="number"
          placeholder="Members"
          name="members"
          [(ngModel)]="customer.members"
          min="1"
          required
        />

        <select name="eventType" [(ngModel)]="customer.eventType" required>
          <option value="">Select Event</option>
          <option *ngFor="let c of activeEventType" [ngValue]="c._id">
            {{ c.eventType_name }}
          </option>
        </select>

        <input type="text" placeholder="Venue" name="venue" [(ngModel)]="customer.venue" required />

        <div class="modal-buttons">
          <button type="button" class="close-btn" (click)="closeModal()">Close</button>
          <button type="submit" class="submit-btn">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <!-- FOOTER -->
  <div class="footer-bar">
    H.NO. 9-1-354, Mamatha Theatre Lane, Bhagathnagar, Karimnagar <br />
    www.annapurnacaterer.in
  </div>
</div>
