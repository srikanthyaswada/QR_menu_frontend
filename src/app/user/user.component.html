<div class="page-container">
  <!-- QR SECTION -->
  <div *ngIf="!showMenu" class="qr-box">
    <img [src]="qrImage" (click)="scanQR()" />
    <p>Scan QR to View Menu</p>
  </div>

  <div class="page-center" *ngIf="showMenu">
    <div class="card shadow-lg p-4 select-card">
      <h5 class="fw-bold text-success mb-3 text-center">Select Items</h5>

      <div *ngFor="let category of groupedItems | keyvalue">
        <h6 class="fw-bold text-success mt-3">
          {{ category.key }}
        </h6>

        <div
          *ngFor="let item of $any(category.value)"
          class="item-row d-flex justify-content-between align-items-center"
        >
          <span class="item-name">{{ item.name }}</span>

          <input type="checkbox" class="form-check-input" [(ngModel)]="item.selected" />
        </div>
      </div>

      <div class="text-center mt-4">
        <button class="btn btn-success px-4" (click)="sendOrder()">Send Order</button>
      </div>
    </div>
  </div>
</div>

<!-- MODAL -->
<div class="modal-backdrop-custom" *ngIf="isModalOpen">
  <div class="order-modal card p-4 shadow-lg">
    <h5 class="fw-bold text-success text-center mb-3">Selected Items</h5>

    <div *ngFor="let cat of selectedCategories" class="mb-2">âœ” {{ cat.name }}</div>

    <hr />
    <div class="mb-3">
      <input
        type="text"
        class="form-control mb-2"
        placeholder="Customer Name"
        [(ngModel)]="customer.name"
      />

      <input
        type="tel"
        class="form-control"
        placeholder="Mobile Number"
        [(ngModel)]="customer.mobile"
      />
    </div>

    <div class="text-center">
      <button class="btn btn-success me-2" (click)="submitOrder()">Submit</button>
      <button class="btn btn-secondary" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>
